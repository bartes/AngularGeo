(function(){"use strict";var a=angular.module("angular-geo",[]);a.provider("angularGeo",function(){var a,b={providerSvcNames:[],providers:[]},c="geolocation"in navigator,d=0;return{addProvider:function(a){return b.providerSvcNames.push(a),this},$get:function(e,f,g,h,i){if(0===b.providerSvcNames.length)throw new Error("AngularGeo requires at least 1 geo provider");for(var j=0;j<b.providerSvcNames.length;j++)i.has(b.providerSvcNames[j])?b.providers.push(i.get(b.providerSvcNames[j])):e.error("angularGeo could not locate service "+b.providerSvcNames[j]);var k=b.providers;if(0===k.length)throw new Error("angularGeo could not locate any of the geo providers specified, verify that you have them properly linked");var l=function(a,b,c,e,g,h){var i=h||f.defer(),j=k[d].geocode(a,b,c,e,g);return j.then(function(a){i.resolve(a)},function(f){return 1===k.length&&i.reject(f),d<k.length-1?d++:d=0,l(a,b,c,e,g,i)}),i.promise};return{geocode:function(a,b,c,d,e){return l(a,b,c,d,e,null)},reverseGeocode:function(){},getCurrentPosition:function(a,b){var d=this;if(!c)throw new Error("Browser geolocation not supported");var e=f.defer();return navigator.geolocation.getCurrentPosition(function(a){if(b){var c=d.reverseGeocode({latitude:a.coords.latitude,longitude:a.coords.longitude},null,null,null,null);c.then(function(a){e.resolve(a)},function(a){e.reject(a)})}e.resolve(a)},function(a){e.reject(a)},a),e.promise},watchPosition:function(b){if(!c)throw new Error("Browser geolocation not supported");var d=f.defer();return a=navigator.geolocation.watchPosition(function(a){h.$broadcast("angulargeo:watchposition",a)},function(a){d.reject(a)},b),d.promise},clearWatch:function(){if(!c)throw new Error("Browser geolocation not supported");navigator.geolocation.clearWatch(a)}}}}})}).call(this);